{{ ansible_managed | comment }}
# Do not edit this file by hand
#

{% for include_statement in (nftables_ruleset.include_files | default([])) %}
include "{{ include_statement }}"
{% endfor %}

{% for table in (nftables_ruleset.tables | default([])) %}
table {{ table.family }} {{ table.name }} {
{% for include_statement in (table.include | default([])) %}
    include "{{ include_statement }}"
{% endfor %}

{% for chain in (table.chains | default([])) %}
    chain {{ chain.name }} {
        type {{ chain.type }} hook {{ chain.hook }} {% if chain.device is defined %}device {{ chain.device }} {% endif %}priority {{ chain.priority | default(0) }};
        policy {{ chain.policy | default('accept') }};
{% for rule in (chain.rules | default([])) %}
        {{ rule }}
{% endfor %}
    }
{% endfor %}
}
{% endfor %}
